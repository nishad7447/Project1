<%- include('../layout/userHeader')%>
    <style>
        .body {
            min-height: 100vh;
            background-size: cover;
            font-family: 'Lato', sans-serif;
            color: rgba(189, 189, 189, 0.667);
            background: linear-gradient(140deg, #fff, 50%, #c89068);
        }

        .container-fluid {
            margin-top: 200px;
        }

        p {
            font-size: 14px;
            margin-bottom: 7px;
        }

        .small {
            letter-spacing: 0.5px !important;
        }

        .card-1 {
            box-shadow: 0px 0px 15px 0px rgb(145, 145, 145);
        }

        hr {
            background-color: rgba(248, 248, 248, 0.667);
        }

        .bold {
            font-weight: 500;
        }

        .change-color {
            color: #ffa319 !important;
        }

        .card-2 {
            box-shadow: 1px 1px 3px 0px rgb(112, 115, 139);
        }

        .fa-circle.active {
            font-size: 8px;
            color: #ff992c;
        }

        .fa-circle {
            font-size: 8px;
            color: #aaa;
        }

        .rounded {
            border-radius: 2.25rem !important;
        }

        .progress-bar {
            background-color: hsl(26, 100%, 64%) !important;
        }

        .progress {
            height: 5px !important;
            margin-bottom: 0;
        }

        .invoice {
            position: relative;
            top: -70px;
        }

        .Glasses {
            position: relative;
            top: -12px !important;
        }

        .card-footer {
            background-color: #fda86c;
            color: #fff;
        }

        h2 {
            color: rgb(126, 74, 0);
            letter-spacing: 2px !important;
        }

        .display-3 {
            font-weight: 500 !important;
        }

        @media (max-width: 479px) {
            .invoice {
                position: relative;
                top: 7px;
            }

            .border-line {
                border-right: 0px solid rgb(226, 206, 226) !important;
            }
        }

        @media (max-width: 700px) {
            h2 {
                color: rgb(125, 86, 2);
                font-size: 17px;
            }

            .display-3 {
                font-size: 28px;
                font-weight: 500 !important;
            }
        }

        .card-footer small {
            letter-spacing: 7px !important;
            font-size: 12px;
        }

        .border-line {
            border-right: 1px solid rgb(226, 206, 226)
        }
    </style>


    <div class="hero-wrap hero-bread" style="background-image: url('/assets/images/bg_6.jpg');">
        <div class="container">
            <div class="row no-gutters slider-text align-items-center justify-content-center">
                <div class="col-md-9 ftco-animate text-center">
                    <p class="breadcrumbs"><span class="mr-2"><a href="/">Home</a></span> <span><a
                                href="/order">&nbsp;Orders </a>&nbsp; Ordered Products</span></p>
                    <h1 class="mb-0 bread">Collection Ordered Products</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid my-5  d-flex  justify-content-center">
        <div class="card card-1">
            <div class="card-header bg-white">
                <div class="media flex-sm-row flex-column-reverse justify-content-between  ">
                    <div class="col my-auto">
                        <h4 class="mb-0">Thanks for your Order,<span class="change-color">
                                <%=data.userName%>
                            </span> !</h4>
                    </div>
                    <div class="col-auto text-center  my-auto pl-0 pt-sm-4"><span
                            class="icon-shopping_cart change-color" style="font-size:70px;"></span>
                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="row justify-content-between mb-3">
                    <div class="col-auto">
                        <h6 class="color-1 mb-0 change-color">Receipt</h6>
                    </div>
                    <% if( data.status !="Returned" ) { %>
                        <% if( data.status !="Refunded" ) { %>
                            <% if(data.status !='Cancelled' ) { %>
                                <% if(data.status=='Delivered' ) { %>
                                    <a data-toggle="modal" data-target="#return<%= data._id %>" class="btn btn-danger"
                                        style="color: white">Return order</a>
                                    <% }else{ %>
                                        <a data-toggle="modal" data-target="#cancel<%= data._id %>"
                                            class="btn btn-danger" style="color: white">Cancel order</a>
                                        <% } %>
                                            <% } %>
                                                <% } %>
                                                    <% } %>
                                                        <!-- {{!-- <div class="col-auto  "> <small>Receipt Voucher : 1KAU9-84UIL</small> </div> --}} -->
                </div>
                <!-- {{#each orders}} -->
                <div class="row">
                    <div class="col">
                        <a style="color: inherit;">
                            <div class="card card-2">
                                <div class="card-body">
                                    <% data.item.forEach(function (item) { %>

                                        <div class="media">
                                            <div class="sq align-self-center "> <img
                                                    class="img-fluid  my-auto align-self-center mr-2 mr-md-4 pl-0 p-0 m-0"
                                                    src="<%= item.product.images[0] %> " style="width: 80px;"
                                                    height="100px" /> </div>
                                            <div class="media-body my-auto text-right">
                                                <div class="row  my-auto flex-column flex-md-row">
                                                    <div class="col my-auto">
                                                        <h6 class="mb-0">
                                                            <%= item.product.name %>
                                                        </h6>
                                                    </div>
                                                    <!-- {{!-- <div class="col-auto my-auto"> <small>Golden Rim </small></div> --}}
                                                        {{!-- <div class="col my-auto"> <small>Size : M</small></div> --}} -->
                                                    <div class="col my-auto"> <small>Qty : <%= item.quantity %></small>
                                                    </div>
                                                    <div class="col my-auto">
                                                        <h6 class="mb-0">&#8377;<%= item.product.price%>
                                                        </h6>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <hr class="my-3 ">
                                        <% }) %>
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                <!-- {{/each}} -->
                <div class="row mt-4">
                    <div class="col">
                        <div class="row justify-content-between">
                            <div class="col-auto">
                                <p class="mb-3 text-dark"><b>Order Details</b></p>
                            </div>
                            <div class="flex-sm-col text-right col">
                                <p class="mb-1"><b>Total</b></p>
                            </div>
                            <div class="flex-sm-col col-auto">
                                <p class="mb-1">&#8377;<%= data.total %>
                                </p>
                            </div>
                        </div>
                        <div class="row justify-content-between">
                            <div class="flex-sm-col text-right col">
                                <p class="mb-1"> <b>Discount</b></p>
                            </div>
                            <div class="flex-sm-col col-auto">
                                <p class="mb-1">&#8377;100</p>
                            </div>
                        </div>
                        <% if(data.coupon) { %>
                            <div class="row justify-content-between">
                                <div class="flex-sm-col text-right col">
                                    <p class="mb-1"><b>Coupon Applied</b></p>
                                </div>
                                <div class="flex-sm-col col-auto">
                                    <p class="mb-1">&#8377;<%=data.coupon.discount%>
                                    </p>
                                </div>
                            </div>
                            <%} %>
                                <div class="row justify-content-between">
                                    <div class="flex-sm-col text-right col">
                                        <p class="mb-1"><b>Delivery Charges</b></p>
                                    </div>
                                    <div class="flex-sm-col col-auto">
                                        <p class="mb-1">Free</p>
                                    </div>
                                </div>
                    </div>
                </div>
                <div class="row invoice ">
                    <div class="col">
                        <p class="mb-1"> OrderId : <%= data._id %>
                        </p>
                        <p class="mb-1">Order status : <%= data.status %>
                        </p>
                        <p class="mb-1">Invoice Date : <%= data.date %>
                        </p>
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <div class="jumbotron-fluid">
                    <div class="row justify-content-between ">
                        <div class="col-sm-auto col-auto my-auto">
                            <div class="navbar-brand">Flag-Ship <br> Phones</div>
                        </div>
                        <div class="col-auto my-auto ">
                            <h2 class="mb-0 font-weight-bold">TOTAL COST</h2>
                        </div>
                        <div class="col-auto my-auto ml-auto">
                            <h3 class="display-3 ">&#8377; <%= data.total %>
                            </h3>
                        </div>
                    </div>
                    <div class="row mb-3 mt-3 mt-md-0">
                        <!-- {{!-- <div class="col-auto border-line"> <small class="text-white">PAN:AA02hDW7E</small></div> --}} -->
                        <div class="col-auto border-line"> <small class="text-white">OrderID:<%= data._id %> </small>
                        </div>
                        <div class="col-auto "><small class="text-white">GSTN:268FD07EXX </small> </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- loader -->
    <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
            <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
            <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                stroke="#F96D00" />
        </svg></div>

    <!-- {{!-- modals for cancel-order confirmation --}}-->
    <% if (data.item ) { %>
        <% data.item.forEach(function (item) { %>
            <div class="modal fade" id="cancel<%= data._id %>" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">Cancel Confirmation</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            Do you want to cancel this order?
                            <form class="text-dark" action="/cancelOrder/<%= data._id %>" method="post">
                                <div class="form-group">
                                    <label for="name" class="col-form-label text-dark">Reason for Cancel : </label>
                                    <input type="text" name="reason" value="" required>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">cancel</button>
                                    <a><button type="submit" class="btn btn-primary">confirm</button></a>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <% }) %>
                <% } %>

                    <!-- {{!-- modals for Return-order confirmation --}}-->
                    <% if (data.item ) { %>
                        <% data.item.forEach(function (item) { %>
                            <div class="modal fade" id="return<%= data._id %>" tabindex="-1" role="dialog"
                                aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLongTitle">Return Confirmation</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            Do you want to Return this order?
                                            <form class="text-dark" action="/returnOrder/<%= data._id %>" method="post">
                                                <div class="form-group">
                                                    <label for="name" class="col-form-label text-dark">Reason for Return
                                                        : </label>
                                                    <input type="text" name="reason" value="" required>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary"
                                                        data-dismiss="modal">cancel</button>
                                                    <a><button type="submit"
                                                            class="btn btn-primary">confirm</button></a>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <% }) %>
                                <% } %>

                                    <%- include('./about')%>

                                        <%- include('../layout/userFooter')%>